version: "3"
services:
  nginx:
    container_name: ds1-nginx
    build: ./docker
    networks:
      ipv4_address: 10.0.0.1  
    ports:
      - 80:80
      - 443:443
    restart: always
    volumes:
      - /etc/letsencrypt:/etc/letsencrypt
      - /var/www/html:/var/www/html

  certbot:
    image: certbot/certbot:v1.7.0
    command: >
      /bin/sh -c '
      tail -f /dev/null
      ["--version"]
      '
    networks:
      ipv4_address: 10.0.0.2
    volumes:
      - /etc/letsencrypt:/etc/letsencrypt
      - /var/www/html:/var/www/html

networks:
  default:
    name: ds1-container-network
    external: true
